<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Vert.x Kubernetes discovery</title>
    <script src="https://cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
    <script src='vertx-eventbus.js'></script>

    <script>

var eb = new EventBus('/eventbus');

eb.onopen = function() {
    console.log("connected");
  // set a handler to receive a message
  eb.registerHandler('channel1', function(error, message) {
    console.log('received a message: ' + JSON.stringify(message));
    var div = document.getElementById('messages');
    div.innerHTML = div.innerHTML + message.body.message+'</br>';
  });

  // send a message
 // eb.send('channel1', {name: 'tim', age: 587});

}

</script>
</head>
<body>
<div id="messages"></div>
</body>
</html>
